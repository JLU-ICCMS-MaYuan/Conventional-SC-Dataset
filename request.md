# 超导文献数据库网站 - 需求文档

## 需求记录

### 1. 初步想法
打开网页就是一个元素周期表，我通过点击选择任意元素（有时候只选择一个元素，那就是选择了这个元素的单质），就能获得这个元素的所有关于超导体的文献。

### 2. 文献数据获取方式
获得的文献都是用户上传的doi链接，你通过解析doi链接来告诉我详细的文章的信息，比如作者信息，文章摘要，题目，还有一个完美的APS期刊的引用方式。

### 3. 去中心化理念
我希望这是一个去中心化的网站，任何人都可以往上面上传文献。在上传文献的时候，需要用户提供自己的姓名，单位，当然这不是强制的，不想填的话，就由系统默认姓名是：匿名贡献者，单位是：未提供单位。

### 4. 技术栈选择
实现语言：Python（FastAPI框架）
数据库：SQLite（方便本地开发）
前端：HTML + CSS + JavaScript（原生）

### 5. 不需要MCP
本项目不需要使用MCP（Model Context Protocol）。

## 核心功能详细需求

### 一、元素周期表交互界面

**功能描述：**
- 打开网站显示可视化的118元素周期表
- 支持多个元素选择（点击高亮，再次点击取消）
- 实时显示已选元素列表（格式：已选元素：H、O）
- 两种触发方式进入化合物页面：
  - 点击"进入化合物页面"按钮
  - 键盘按Enter键快捷跳转
- 系统校验：若元素组合暂无文献，提示"该元素组合暂未收录对应化合物，请重新选择"

**元素选择逻辑：**
- 选择一个元素：显示该元素单质的超导体文献
- 选择多个元素：查找包含所有选中元素的化合物超导体文献

### 二、元素组合页面（化合物页面）

**页面设计方案：** 元素组合页（如"Na-Cl系统"）
- 选择Na和Cl后，进入一个页面展示所有只含Na和Cl的化合物文献（NaCl、Na₂Cl等混在一起）
- 不需要用户指定具体化学式

**页面显示信息：**
1. 页面标题：显示元素组合（如"Y-Ba-Cu-O系统超导体"）
2. 文献列表（每篇文献显示）：
   - DOI链接（可点击跳转）
   - 文章标题
   - 作者列表
   - 期刊名称、卷期、页码、年份
   - 摘要（可折叠展开）
   - APS引用格式（可一键复制）
   - **化学式**（用户上传时可选填，如"YBa₂Cu₃O₇"）
   - **晶体结构类型**（用户上传时可选填，如"钙钛矿型"）
   - 文献截图（1-5张，显示缩略图，点击查看原图）
   - 贡献者信息（姓名、单位）
   - 提交时间

### 三、文献上传功能

**强制要求：必须上传1-5张文献截图，优先结构图**

**上传表单字段：**

**必填项：**
1. DOI编号（自动验证格式和真实性）
2. 文献截图（1-5张，支持JPG、PNG、PDF，单张≤5MB）

**可选项：**
1. 化学式（如"YBa₂Cu₃O₇"）
2. 晶体结构类型（如"钙钛矿型"）
3. 贡献者姓名（默认："匿名贡献者"）
4. 贡献者单位（默认："未提供单位"）
5. 备注说明

**系统自动处理：**
- 通过CrossRef API获取文献元数据：标题、作者、期刊、年份、摘要
- 生成APS和BibTeX引用格式
- 自动为截图生成缩略图（200x200px）
- 重复检测：同一DOI不能提交到同一元素组合

**上传验证：**
- 未上传截图时，提示："请至少上传1张文献截图，优先上传化合物结构图（如晶体结构、分子结构示意图），便于其他用户快速了解文献核心内容"
- DOI格式错误时，提示："请输入正确的DOI格式，示例：10.1038/nature12345"

### 四、数据质量控制

**已选择的控制机制：**
1. DOI验证：上传时验证DOI是否真实存在，防止无效链接
2. 重复检测：同一篇文献不能重复提交到同一元素组合下
3. 用户举报和审核机制：允许用户举报不当内容，管理员可以删除

### 五、扩展功能

**已选择的功能：**
1. 搜索和过滤：
   - 按关键词搜索（标题、摘要、作者、化学式）
   - 按年份范围、期刊名称筛选
   - 按时间/引用次数排序
2. 导出功能：
   - 批量导出选中文献的引用格式
   - 支持格式：APS、BibTeX
   - 一键复制到剪贴板

**暂不实现（第二版）：**
- 评论和讨论功能
- 用户可编辑/删除自己的提交

## 技术实现细节

### 数据来源
用户上传DOI，系统自动通过CrossRef API获取元数据

### 部署环境
本地运行（开发测试）

### 截图存储方式
存入数据库（BLOB字段）

### 图片处理
需要生成缩略图（200x200px）以加快页面加载速度

### MVP版本功能
1. 元素周期表选择界面
2. 文献上传（DOI+元素标注+截图）
3. 文献列表和搜索
4. 导出引用格式

## 数据库设计

### 表结构：
1. **elements** - 元素表（预填充118个元素）
2. **compounds** - 元素组合表（动态生成）
3. **papers** - 文献表（包含DOI、元数据、化学式、晶体结构等）
4. **paper_images** - 文献截图表（存储原图和缩略图BLOB）
5. **compound_elements** - 元素组合关联表

## 项目目标

建立一个开放贡献的超导文献收集平台，通过元素周期表作为导航界面，让研究者快速找到特定元素相关的超导材料文献。

---

## 后续需求补充

### 6. 用户体验优化（2025-11-30）

**问题1：** 当显示该元素暂未收录对应化合物时，页面一直显示"正在检查元素组合"，这是不合理的。

**解决方案：**
- 可以在提示未收录对应化合物后，直接进入该元素组合的页面
- 在该页面部署一个允许上传文献的按钮
- 允许用户成为第一个贡献者

### 7. 文献展示和分类系统改进（2025-11-30）

**需求1：图片展示优化**
- 进入元素组合页面后，将第一张截图显示在右侧，要大一点，完整一点
- 其它截图不必那么大，但要求一定要完整

**需求2：文章类型标签（必选）**
- 上传文件时，必须做分类：理论文章还是实验文章
- 提示用户：如果是理论结合实验的文章，就归类为实验文章
- 通过选择按钮的方式实现，而不是自己手写

**需求3：超导体类型标签（必选）**
- 必须要打的标签：常规超导体、非常规超导体、还是未知类型的超导体这三类
- 通过选择按钮的方式实现，而不是自己手写

## 实现的功能列表

### 第一版（基础功能）
1. ✅ 元素周期表交互界面
2. ✅ 文献上传与管理（DOI自动解析）
3. ✅ 文献截图存储（1-5张，必须上传）
4. ✅ 搜索和筛选功能
5. ✅ 引用格式导出（APS、BibTeX）
6. ✅ 开放贡献机制

### 第二版（用户体验优化）
7. ✅ 允许访问无文献的元素组合页面
8. ✅ 友好的"成为第一个贡献者"提示
9. ✅ 第一张截图右侧大图展示
10. ✅ 文章类型标签（理论/实验）
11. ✅ 超导体类型标签（常规/非常规/未知）
12. ✅ 文献卡片标签徽章显示

---

## 后续需求补充（第二轮）

### 8. 部署需求（2025-11-30）

**需求：** 想让网页在一个独立的域名上运行，或者使用 Gitee/GitHub Pages 部署

**技术分析：**
- GitHub Pages 和 Gitee Pages 不适用（仅支持静态网站）
- 本项目需要 FastAPI 后端 + SQLite 数据库，属于动态 Web 应用
- 需要真正的服务器环境

**可选部署方案：**
1. 云平台免费托管（Railway、Render、Fly.io）
2. VPS 服务器部署（阿里云、腾讯云等）
3. Docker 容器化部署

**解决方案：** 创建了完整的部署指南和配置文件（详见 DEPLOYMENT.md）

---

### 9. 晶体结构类型智能提示（2025-11-30）

**需求：**
- 填写晶体结构类型时，弹出可选择项（来自历史数据）
- 如果没有合适的选项，用户可以自己填写
- 新填写的类型会自动加入到可选项中，供后续用户选择

**实现方案：**
- 后端：添加 `/api/papers/crystal-structures` 端点，返回所有已存在的晶体结构类型
- 数据库：从 `papers` 表查询 `crystal_structure` 字段（去重、排序）
- 前端：使用 HTML5 `<datalist>` 元素实现自动补全
- 用户体验：输入时显示历史数据，也可以自由输入新类型

### 10. APS引用格式修正（2025-11-30）

**问题：** 当前的APS引用格式缺少文章标题

**错误格式：**
```
H. Wang, X. Li, G. Gao, Y. Li, and Y. Ma, WIREs Comput. Mol. Sci. 8, e1330 (2018).
```

**正确格式：**
```
H. Wang, X. Li, G. Gao, Y. Li, and Y. Ma, Hydrogen-rich
superconductors at high pressures, WIREs Comput. Mol. Sci.
8, e1330 (2018).
```

**修复内容：**
1. 在引用格式中添加文章标题（位于作者和期刊之间）
2. 更新期刊缩写字典，添加更多常见物理和材料科学期刊：
   - Matter Radiat. Extremes
   - Natl. Sci. Rev.
   - Phys. Rep.
   - The Innovation
   - WIREs Comput. Mol. Sci.
   - Nat. Commun.
   - Adv. Mater.
   - Sci. Adv.
   等共20+种期刊

**格式顺序：** 作者, 标题, 期刊 卷, 页码 (年份).